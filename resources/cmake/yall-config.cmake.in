# Copyright (C) 2017 Quentin "Naccyde" Deslandes.
# Redistribution and use of this file is allowed according to the terms of the MIT license.
# For details see the LICENSE file distributed with yall.

@PACKAGE_INIT@

if (UNIX)
	set(_LIB_PREFIX lib)
	set(_LIB_SUFFIX so)
elseif (WIN32)
	set(_LIB_PREFIX )
	set(_LIB_SUFFIX dll)
endif ()

set(_YALL_BACKUP_MODULE_PATH "${CMAKE_MODULE_PATH}")

# If the developer wants to use Findpthread.cmake packaged with yall
if (NOT YALL_NO_USE_CUSTOM_PTHREAD_MODULE)
	set(CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH}" "${CMAKE_CURRENT_LIST_DIR}")
endif ()

find_package(pthread REQUIRED)

set(CMAKE_MODULE_PATH "${_YALL_BACKUP_MODULE_PATH}")

include("${CMAKE_CURRENT_LIST_DIR}/yall_targets.cmake")

# Little hack here, avoid Release configuration to install CMake files
set_property(TARGET yall::yall APPEND PROPERTY IMPORTED_CONFIGURATIONS RELEASE)
set_target_properties(yall::yall PROPERTIES
	IMPORTED_LOCATION_RELEASE "${_IMPORT_PREFIX}/lib/${_LIB_PREFIX}yall.${_LIB_SUFFIX}"
	IMPORTED_SONAME_RELEASE "${_LIB_PREFIX}yall.${_LIB_SUFFIX}")

set_property(TARGET yall::yall APPEND PROPERTY IMPORTED_CONFIGURATIONS DEBUG)
set_target_properties(yall::yall PROPERTIES
	IMPORTED_LOCATION_DEBUG "${_IMPORT_PREFIX}/lib/${_LIB_PREFIX}yalld.${_LIB_SUFFIX}"
	IMPORTED_SONAME_DEBUG "${_LIB_PREFIX}yalld.${_LIB_SUFFIX}")
