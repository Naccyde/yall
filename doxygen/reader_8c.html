<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yall: src/config/reader.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">yall
   &#160;<span id="projectnumber">1.8.1</span>
   </div>
   <div id="projectbrief">C lightweight logging library</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('reader_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">reader.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="reader_8h_source.html">yall/config/reader.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;jansson.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">yall/debug.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aece4de8a7f8b0c1fdcbea1ca28e83454"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader_8c.html#aece4de8a7f8b0c1fdcbea1ca28e83454">_YALL_JSON_ALREADY_PARSED</a>&#160;&#160;&#160;&quot;__yall_checked_object&quot;</td></tr>
<tr class="separator:aece4de8a7f8b0c1fdcbea1ca28e83454"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acef620d55bc925b142d1c35529a53502"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader_8c.html#acef620d55bc925b142d1c35529a53502">set_json_config</a> (const char *key, json_t *<a class="el" href="syslog_8c.html#a01571c420f280137c16d319178731da5">value</a>)</td></tr>
<tr class="memdesc:acef620d55bc925b142d1c35529a53502"><td class="mdescLeft">&#160;</td><td class="mdescRight">From a parameter key and its value, this function set up the proper library's parameter configuration. This isn't the best way we could achieve this, but there is only 3 different parameters to set, so it could be sufficient for the moment. Once we have more parameters to manage, this behaviour could be improved.  <a href="#acef620d55bc925b142d1c35529a53502">More...</a><br /></td></tr>
<tr class="separator:acef620d55bc925b142d1c35529a53502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ecd147b7f02378858f2906e343265f8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader_8c.html#a9ecd147b7f02378858f2906e343265f8">parse_config</a> (json_t *config)</td></tr>
<tr class="memdesc:a9ecd147b7f02378858f2906e343265f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the given JSON object to retrieve subsystems from it. It loops on the JSON object available in the given paremeter and apply them depending of their name. See the documentation for informations about how to manage library parameters in configuration file.  <a href="#a9ecd147b7f02378858f2906e343265f8">More...</a><br /></td></tr>
<tr class="separator:a9ecd147b7f02378858f2906e343265f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec38555cfcdc6bc965945250135e21cb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader_8c.html#aec38555cfcdc6bc965945250135e21cb">parse_subsystems</a> (json_t *<a class="el" href="subsystem_8c.html#a056e4874b26cac0a03ccde63b261906e">subsystems</a>, const char *subsystem_str)</td></tr>
<tr class="memdesc:aec38555cfcdc6bc965945250135e21cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the given JSON object to retrieve subsystems from it. It get the subsystem (JSON object) named as in the second parameter. Then, it check if this subsystem has a parent, if it does, call itself with the name of the parent as second parameter, untile their is no parent requested. See the documentation for informations about how to define a subsystem in configuration file.  <a href="#aec38555cfcdc6bc965945250135e21cb">More...</a><br /></td></tr>
<tr class="separator:aec38555cfcdc6bc965945250135e21cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7359ab767bc96551d80ce7957f6f7c19"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader_8c.html#a7359ab767bc96551d80ce7957f6f7c19">parse_json_config</a> (json_t *root)</td></tr>
<tr class="memdesc:a7359ab767bc96551d80ce7957f6f7c19"><td class="mdescLeft">&#160;</td><td class="mdescRight">From the given root JSON parameter, it parse the tree to extract the different yall parameters.  <a href="#a7359ab767bc96551d80ce7957f6f7c19">More...</a><br /></td></tr>
<tr class="separator:a7359ab767bc96551d80ce7957f6f7c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0007e2cf937f17dd1fd03fa81b2df9a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reader_8c.html#a0007e2cf937f17dd1fd03fa81b2df9a9">read_config</a> (const char *filename)</td></tr>
<tr class="memdesc:a0007e2cf937f17dd1fd03fa81b2df9a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the content of the given filename as a configuration. This configuration should be stored in JSON format. For more informations about object names, see documentation.  <a href="#a0007e2cf937f17dd1fd03fa81b2df9a9">More...</a><br /></td></tr>
<tr class="separator:a0007e2cf937f17dd1fd03fa81b2df9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aece4de8a7f8b0c1fdcbea1ca28e83454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece4de8a7f8b0c1fdcbea1ca28e83454">&#9670;&nbsp;</a></span>_YALL_JSON_ALREADY_PARSED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _YALL_JSON_ALREADY_PARSED&#160;&#160;&#160;&quot;__yall_checked_object&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9ecd147b7f02378858f2906e343265f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ecd147b7f02378858f2906e343265f8">&#9670;&nbsp;</a></span>parse_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a> parse_config </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse the given JSON object to retrieve subsystems from it. It loops on the JSON object available in the given paremeter and apply them depending of their name. See the documentation for informations about how to manage library parameters in configuration file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Root JSON object containing the library configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code depending the result of the function. If there is not config parameters, this is not an error, as the user can choose to not define it. </dd></dl>

</div>
</div>
<a id="a7359ab767bc96551d80ce7957f6f7c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7359ab767bc96551d80ce7957f6f7c19">&#9670;&nbsp;</a></span>parse_json_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a> parse_json_config </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>root</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>From the given root JSON parameter, it parse the tree to extract the different yall parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">root</td><td>Root of the JSON configuration tree. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code depending the result of the function. </dd></dl>

</div>
</div>
<a id="aec38555cfcdc6bc965945250135e21cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec38555cfcdc6bc965945250135e21cb">&#9670;&nbsp;</a></span>parse_subsystems()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a> parse_subsystems </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>subsystems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subsystem_str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse the given JSON object to retrieve subsystems from it. It get the subsystem (JSON object) named as in the second parameter. Then, it check if this subsystem has a parent, if it does, call itself with the name of the parent as second parameter, untile their is no parent requested. See the documentation for informations about how to define a subsystem in configuration file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subsystems</td><td>Root subsystems object of the JSON data. </td></tr>
    <tr><td class="paramname">subsystem_str</td><td>Subsystem to start from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code depending the result of the function. </dd></dl>

</div>
</div>
<a id="a0007e2cf937f17dd1fd03fa81b2df9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0007e2cf937f17dd1fd03fa81b2df9a9">&#9670;&nbsp;</a></span>read_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8h.html#abdee627015c581e26f65724451dc1797">yall_error</a> read_config </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the content of the given filename as a configuration. This configuration should be stored in JSON format. For more informations about object names, see documentation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Name of the file containing the configuration to apply. Can be a relative or absolute path. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code depending the result of the function. </dd></dl>

</div>
</div>
<a id="acef620d55bc925b142d1c35529a53502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acef620d55bc925b142d1c35529a53502">&#9670;&nbsp;</a></span>set_json_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_json_config </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>From a parameter key and its value, this function set up the proper library's parameter configuration. This isn't the best way we could achieve this, but there is only 3 different parameters to set, so it could be sufficient for the moment. Once we have more parameters to manage, this behaviour could be improved. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key defining the parameter </td></tr>
    <tr><td class="paramname">value</td><td>Value of the parameter to set, as a json_t type, it has to be converted to the proper type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_7e83d1792d529f4aa7126ac7e0b3b699.html">config</a></li><li class="navelem"><a class="el" href="reader_8c.html">reader.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
